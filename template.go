package main

var templateModelBase64 = "Ly8gK2J1aWxkIHNhbXBsZV9zd2FnZ2VyCgpwYWNrYWdlIHNhbXBsZV9zd2FnZ2VyCgp0eXBlIEluZm8gc3RydWN0IHsKCURlc2NyaXB0aW9uICAgIHN0cmluZyBganNvbjoiZGVzY3JpcHRpb24iYAoJVmVyc2lvbiAgICAgICAgc3RyaW5nIGBqc29uOiJ2ZXJzaW9uImAKCVRpdGxlICAgICAgICAgIHN0cmluZyBganNvbjoidGl0bGUiYAoJVGVybXNPZlNlcnZpY2Ugc3RyaW5nIGBqc29uOiJ0ZXJtc09mU2VydmljZSJgCglDb250YWN0ICAgICAgICBzdHJ1Y3QgewoJCUVtYWlsIHN0cmluZyBganNvbjoiZW1haWwiYAoJfSBganNvbjoiY29udGFjdCJgCglMaWNlbnNlIHN0cnVjdCB7CgkJTmFtZSBzdHJpbmcgYGpzb246Im5hbWUiYAoJCVVSTCAgc3RyaW5nIGBqc29uOiJ1cmwiYAoJfSBganNvbjoibGljZW5zZSJgCn0KCnR5cGUgUm91dGVyIHN0cnVjdCB7CglUYWdzICAgICAgICBbXXN0cmluZyAgICAgICAgICAgIGBqc29uOiJ0YWdzImAKCVN1bW1hcnkgICAgIHN0cmluZyAgICAgICAgICAgICAgYGpzb246InN1bW1hcnkiYAoJRGVzY3JpcHRpb24gc3RyaW5nICAgICAgICAgICAgICBganNvbjoiZGVzY3JpcHRpb24iYAoJT3BlcmF0aW9uSUQgc3RyaW5nICAgICAgICAgICAgICBganNvbjoib3BlcmF0aW9uSWQiYAoJQ29uc3VtZXMgICAgW11zdHJpbmcgICAgICAgICAgICBganNvbjoiY29uc3VtZXMiYAoJUHJvZHVjZXMgICAgW11zdHJpbmcgICAgICAgICAgICBganNvbjoicHJvZHVjZXMiYAoJUGFyYW1ldGVycyAgW11QYXJhbWV0ZXIgICAgICAgICBganNvbjoicGFyYW1ldGVycyJgCglSZXNwb25zZXMgICBtYXBbc3RyaW5nXVJlc3BvbnNlIGBqc29uOiJyZXNwb25zZXMiYAp9Cgp0eXBlIFNjaGVtYSBzdHJ1Y3QgewoJUmVmIHN0cmluZyBganNvbjoiJHJlZixvbWl0ZW1wdHkiYAp9Cgp0eXBlIFBhcmFtZXRlciBzdHJ1Y3QgewoJSW4gICAgICAgICAgc3RyaW5nICBganNvbjoiaW4iYAoJTmFtZSAgICAgICAgc3RyaW5nICBganNvbjoibmFtZSJgCglUeXBlICAgICAgICBzdHJpbmcgIGBqc29uOiJ0eXBlImAKCURlc2NyaXB0aW9uIHN0cmluZyAgYGpzb246ImRlc2NyaXB0aW9uImAKCVJlcXVpcmVkICAgIGJvb2wgICAgYGpzb246InJlcXVpcmVkImAKCVNjaGVtYSAgICAgICpTY2hlbWEgYGpzb246InNjaGVtYSxvbWl0ZW1wdHkiYAp9Cgp0eXBlIFJlc3BvbnNlIHN0cnVjdCB7CglEZXNjcmlwdGlvbiBzdHJpbmcgYGpzb246ImRlc2NyaXB0aW9uImAKCVNjaGVtYSAgICAgIHN0cnVjdCB7CgkJVHlwZSAgc3RyaW5nIGBqc29uOiJ0eXBlImAKCQlJdGVtcyBzdHJ1Y3QgewoJCQlSZWYgc3RyaW5nIGBqc29uOiIkcmVmImAKCQl9IGBqc29uOiJpdGVtcyJgCgkJUmVmIHN0cmluZyBganNvbjoiJHJlZiJgCgl9IGBqc29uOiJzY2hlbWEiYAp9Cgp0eXBlIFByb3BlcnR5IHN0cnVjdCB7CglUeXBlICAgICAgICBzdHJpbmcgICAgICBganNvbjoidHlwZSxvbWl0ZW1wdHkiYAoJRm9ybWF0ICAgICAgc3RyaW5nICAgICAgYGpzb246ImZvcm1hdCxvbWl0ZW1wdHkiYAoJRGVzY3JpcHRpb24gc3RyaW5nICAgICAgYGpzb246ImRlc2NyaXB0aW9uLG9taXRlbXB0eSJgCglSZWYgICAgICAgICBzdHJpbmcgICAgICBganNvbjoiJHJlZixvbWl0ZW1wdHkiYAoJSXRlbXMgICAgICAgKkRlZmluaXRpb24gYGpzb246Iml0ZW1zLG9taXRlbXB0eSJgCglQcm9wZXJ0aWVzICAqRGVmaW5pdGlvbiBganNvbjoicHJvcGVydGllcyxvbWl0ZW1wdHkiYAoKCUFkZGl0aW9uYWxQcm9wZXJ0aWVzICpBZGRpdGlvbmFsUHJvcGVydGllcyBganNvbjoiYWRkaXRpb25hbFByb3BlcnRpZXMsb21pdGVtcHR5ImAKfQoKdHlwZSBBZGRpdGlvbmFsUHJvcGVydGllcyBzdHJ1Y3QgewoJVHlwZSBzdHJpbmcgYGpzb246InR5cGUiYAoJUmVmICBzdHJpbmcgYGpzb246IiRyZWYiYAp9Cgp0eXBlIE5lc3RlZFByb3BlcnR5IHN0cnVjdCB7CglJZCAgIHN0cmluZyBganNvbjoiaWQsb21pdGVtcHR5ImAKCU5hbWUgc3RyaW5nIGBqc29uOiJuYW1lLG9taXRlbXB0eSJgCn0KCnR5cGUgRGVmaW5pdGlvbiBzdHJ1Y3QgewoJVHlwZSAgICAgICAgICAgICAgICAgc3RyaW5nICAgICAgICAgICAgICAgICBganNvbjoidHlwZSxvbWl0ZW1wdHkiYAoJRm9ybWF0ICAgICAgICAgICAgICAgc3RyaW5nICAgICAgICAgICAgICAgICBganNvbjoiZm9ybWF0LG9taXRlbXB0eSJgCglJdGVtcyAgICAgICAgICAgICAgICAqRGVmaW5pdGlvbiAgICAgICAgICAgIGBqc29uOiJpdGVtcyxvbWl0ZW1wdHkiYAoJUHJvcGVydGllcyAgICAgICAgICAgbWFwW3N0cmluZ10qRGVmaW5pdGlvbiBganNvbjoicHJvcGVydGllcyxvbWl0ZW1wdHkiYAoJQWRkaXRpb25hbFByb3BlcnRpZXMgKkRlZmluaXRpb24gICAgICAgICAgICBganNvbjoiYWRkaXRpb25hbFByb3BlcnRpZXMsb21pdGVtcHR5ImAKCVJlZiAgICAgICAgICAgICAgICAgIHN0cmluZyAgICAgICAgICAgICAgICAgYGpzb246IiRyZWYsb21pdGVtcHR5ImAKfQp0eXBlIFN3YWdnZXIgc3RydWN0IHsKCVN3YWdnZXIgICAgIHN0cmluZyAgICAgICAgICAgICAgICAgYGpzb246InN3YWdnZXIiYAoJSW5mbyAgICAgICAgKkluZm8gICAgICAgICAgICAgICAgICBganNvbjoiaW5mbyJgCglIb3N0ICAgICAgICBzdHJpbmcgICAgICAgICAgICAgICAgIGBqc29uOiJob3N0ImAKCUJhc2VQYXRoICAgIHN0cmluZyAgICAgICAgICAgICAgICAgYGpzb246ImJhc2VQYXRoImAKCVNjaGVtZXMgICAgIFtdc3RyaW5nICAgICAgICAgICAgICAgYGpzb246InNjaGVtZXMiYAoJUGF0aHMgICAgICAgbWFwW3N0cmluZ11NZXRob2QgICAgICBganNvbjoicGF0aHMiYAoJRGVmaW5pdGlvbnMgbWFwW3N0cmluZ10qRGVmaW5pdGlvbiBganNvbjoiZGVmaW5pdGlvbnMiYAp9Cgp0eXBlIE1ldGhvZCBtYXBbc3RyaW5nXVJvdXRlcgoKZnVuYyBNYXBUeXBlKHR5cCBzdHJpbmcpIHN0cmluZyB7Cglzd2l0Y2ggdHlwIHsKCWNhc2UgImludCIsICJpbnQ4IiwgImludDE2IiwgImludDMyIiwgImludDY0IiwgInVpbnQiLCAidWludDgiLCAidWludDE2IiwgInVpbnQzMiIsICJ1aW50NjQiOgoJCXJldHVybiAiaW50ZWdlciIKCWNhc2UgInN0cmluZyIsICJzdHIiLCAicyI6CgkJcmV0dXJuICJzdHJpbmciCgljYXNlICJib29sIiwgImJvb2xlYW4iLCAiYiI6CgkJcmV0dXJuICJib29sZWFuIgoJY2FzZSAib2JqZWN0IiwgIm9iaiIsICJvIjoKCQlyZXR1cm4gIm9iamVjdCIKCWNhc2UgImZsb2F0MzIiLCAiZmxvYXQ2NCI6CgkJcmV0dXJuICJudW1iZXIiCgljYXNlICJhcnJheSIsICJzbGljZSI6CgkJcmV0dXJuICJhcnJheSIKCWNhc2UgIm1hcCI6CgkJcmV0dXJuICJtYXAiCgl9CglyZXR1cm4gInt9IiAvLyBhbnkKfQo="

var templateParseBase64 = "Ly8gK2J1aWxkIHNhbXBsZV9zd2FnZ2VyCgpwYWNrYWdlIHNhbXBsZV9zd2FnZ2VyCgppbXBvcnQgKAoJImVuY29kaW5nL2pzb24iCgkiZm10IgoJInJlZmxlY3QiCgkic3RyaW5ncyIKKQoKY29uc3QgKAoJdHlwZVN0cmluZyA9ICJzdHJpbmciCgl0eXBlSW50ICAgID0gImludGVnZXIiCgl0eXBlQm9vbCAgID0gImJvb2xlYW4iCgl0eXBlTnVtYmVyID0gIm51bWJlciIKCXR5cGVPYmplY3QgPSAib2JqZWN0IgoJdHlwZUFycmF5ICA9ICJhcnJheSIKCXR5cGVNYXAgICAgPSAibWFwIgopCgp2YXIgYnVpbGRJblR5cGVzID0gbWFwW3N0cmluZ11zdHJpbmd7CgkidGltZS5UaW1lIjogICJzdHJpbmciLAoJIip0aW1lLlRpbWUiOiAic3RyaW5nIiwKfQoKdmFyIGRlZmluaXRpb25zID0gbWFrZShtYXBbc3RyaW5nXW1vZGVsKQoKZnVuYyBwYXJzZSgpIHN0cmluZyB7Cgl2YXIgc3dhZ2dlciBTd2FnZ2VyCgllcnIgOj0ganNvbi5Vbm1hcnNoYWwoW11ieXRlKGdlbmVyYXRvckpzb24pLCAmc3dhZ2dlcikKCWlmIGVyciAhPSBuaWwgewoJCWZtdC5QcmludGYoInVubWFyc2hhbCBlcnJvcjogJXNcbiIsIGVyci5FcnJvcigpKQoJCXJldHVybiAiIgoJfQoKCWZvciBfLCB2IDo9IHJhbmdlIGdlbmVyYXRvck1vZGVscyB7CgkJcnQgOj0gcmVmbGVjdC5UeXBlT2YodikKCQlydiA6PSByZWZsZWN0LlZhbHVlT2YodikKCQlwYXJzZURlZmluZXMoJnJ2LCBydCkKCX0KCglmb3IgXywgdiA6PSByYW5nZSBkZWZpbml0aW9ucyB7CgkJaWYgc3dhZ2dlci5EZWZpbml0aW9ucyA9PSBuaWwgewoJCQlzd2FnZ2VyLkRlZmluaXRpb25zID0gbWFrZShtYXBbc3RyaW5nXSpEZWZpbml0aW9uKQoJCX0KCQluYW1lLCBkZWZpbml0aW9uIDo9IHYudG9EZWZpbml0aW9uKGZhbHNlKQoJCWlmIGRlZmluaXRpb24gIT0gbmlsICYmIG5hbWUgIT0gIiIgewoJCQlzd2FnZ2VyLkRlZmluaXRpb25zW25hbWVdID0gZGVmaW5pdGlvbgoJCX0KCX0KCWlmIHN3YWdnZXIuU3dhZ2dlciA9PSAiIiB7CgkJc3dhZ2dlci5Td2FnZ2VyID0gIjIuMCIKCX0KCWJzLCBlcnIgOj0ganNvbi5NYXJzaGFsKHN3YWdnZXIpCglpZiBlcnIgIT0gbmlsIHsKCQlmbXQuUHJpbnRmKCJtYXJzaGFsIGVycm9yOiAlc1xuIiwgZXJyLkVycm9yKCkpCgkJcmV0dXJuICIiCgl9CglyZXR1cm4gc3RyaW5nKGJzKQp9Cgp0eXBlIG1vZGVsIHN0cnVjdCB7CglOYW1lICAgc3RyaW5nCglUeXBlICAgc3RyaW5nCglPYmplY3QgKm1vZGVsICAgYGpzb246Im9iamVjdCJgCglGaWVsZHMgW10qbW9kZWwgYGpzb246IixvbWl0ZW1wdHkiYCAvLyBwcm9wZXJ0aWVzCgoJQW5vbnltb3VzIGJvb2wKfQoKZnVuYyAobSAqbW9kZWwpIGV4cGFuZEZpZWxkcygpIFtdKm1vZGVsIHsKCXZhciBmZHMgW10qbW9kZWwKCWZvciBfLCBmIDo9IHJhbmdlIG0uRmllbGRzIHsKCQlpZiBmLkFub255bW91cyAmJiBmLk9iamVjdCAhPSBuaWwgewoJCQlwbSwgb2sgOj0gZGVmaW5pdGlvbnNbZi5PYmplY3QuTmFtZV0KCQkJaWYgb2sgewoJCQkJZmRzID0gYXBwZW5kKGZkcywgcG0uZXhwYW5kRmllbGRzKCkuLi4pCgkJCX0KCQl9IGVsc2UgewoJCQlmZHMgPSBhcHBlbmQoZmRzLCBmKQoJCX0KCX0KCXJldHVybiBmZHMKfQoKZnVuYyAobSAqbW9kZWwpIHRvRGVmaW5pdGlvbihyZWYgYm9vbCkgKG5hbWUgc3RyaW5nLCBkZWZpbml0aW9uICpEZWZpbml0aW9uKSB7CgoJaWYgbSA9PSBuaWwgewoJCXJldHVybgoJfQoJaWYgIXJlZiAmJiBpc0Jhc2VEZWZpbml0aW9ucyhtLlR5cGUpIHsKCQlyZXR1cm4gbS5UeXBlLCBuaWwKCX0KCgl2YXIgZCBEZWZpbml0aW9uCgluYW1lID0gbS5OYW1lCglkLlR5cGUgPSBtLlR5cGUKCglzd2l0Y2ggbS5UeXBlIHsKCWNhc2UgdHlwZU9iamVjdDoKCQlpZiByZWYgewoJCQlpZiBtLk9iamVjdCAhPSBuaWwgewoJCQkJaWYgaXNCYXNlRGVmaW5pdGlvbnMobS5PYmplY3QuVHlwZSkgewoJCQkJCXJldHVybiBtLk5hbWUsICZEZWZpbml0aW9ue1R5cGU6IG0uT2JqZWN0LlR5cGV9CgkJCQl9CgkJCQlpZiAhaXNOZXN0ZWRPYmplY3QobS5PYmplY3QuTmFtZSkgewoJCQkJCXJldHVybiBtLk5hbWUsICZEZWZpbml0aW9ue1R5cGU6IHR5cGVPYmplY3QsIFJlZjogIiMvZGVmaW5pdGlvbnMvIiArIG0uT2JqZWN0Lk5hbWV9CgkJCQl9CgkJCX0gZWxzZSB7CgkJCQlpZiBpc0Jhc2VEZWZpbml0aW9ucyhtLlR5cGUpIHsKCQkJCQlyZXR1cm4gbS5OYW1lLCAmRGVmaW5pdGlvbntUeXBlOiBtLlR5cGV9CgkJCQl9CgkJCQlpZiAhaXNOZXN0ZWRPYmplY3QobS5OYW1lKSB7CgkJCQkJcmV0dXJuIG0uTmFtZSwgJkRlZmluaXRpb257VHlwZTogdHlwZU9iamVjdCwgUmVmOiAiIy9kZWZpbml0aW9ucy8iICsgbS5OYW1lfQoJCQkJfQoJCQl9CgkJfQoJCWlmICFyZWYgJiYgaXNOZXN0ZWRPYmplY3QobmFtZSkgewoJCQlyZXR1cm4gbS5OYW1lLCBuaWwKCQl9CgoJCWlmIG0uT2JqZWN0ICE9IG5pbCB7CgkJCV8sIGQgOj0gbS5PYmplY3QudG9EZWZpbml0aW9uKHRydWUpCgkJCXJldHVybiBtLk5hbWUsIGQKCQl9IGVsc2UgewoJCQlpZiBsZW4obS5GaWVsZHMpID4gMCB7CgkJCQlwcyA6PSBtYWtlKG1hcFtzdHJpbmddKkRlZmluaXRpb24sIGxlbihtLkZpZWxkcykpCgkJCQlmZHMgOj0gbS5leHBhbmRGaWVsZHMoKQoJCQkJZm9yIF8sIHYgOj0gcmFuZ2UgZmRzIHsKCQkJCQlfLCBwc1t2Lk5hbWVdID0gdi50b0RlZmluaXRpb24odHJ1ZSkKCQkJCX0KCQkJCWQuUHJvcGVydGllcyA9IHBzCgkJCX0KCQl9CgljYXNlIHR5cGVBcnJheToKCQlpZiBtLk9iamVjdCAhPSBuaWwgewoJCQlfLCBkIDo9IG0uT2JqZWN0LnRvRGVmaW5pdGlvbih0cnVlKQoJCQlyZXR1cm4gbS5OYW1lLCAmRGVmaW5pdGlvbntUeXBlOiB0eXBlQXJyYXksIEl0ZW1zOiBkfQoJCX0KCWNhc2UgdHlwZU1hcDoKCQlpZiBtLk9iamVjdCAhPSBuaWwgewoJCQlfLCBkIDo9IG0uT2JqZWN0LnRvRGVmaW5pdGlvbih0cnVlKQoJCQlyZXR1cm4gbS5OYW1lLCAmRGVmaW5pdGlvbntUeXBlOiB0eXBlT2JqZWN0LCBBZGRpdGlvbmFsUHJvcGVydGllczogZH0KCQl9Cgl9CglkZWZpbml0aW9uID0gJmQKCXJldHVybgp9CgpmdW5jIGlzQmFzZURlZmluaXRpb25zKHR5cCBzdHJpbmcpIGJvb2wgewoJc3dpdGNoIHR5cCB7CgljYXNlIHR5cGVPYmplY3QsIHR5cGVBcnJheSwgdHlwZU1hcDoKCQlyZXR1cm4gZmFsc2UKCX0KCXJldHVybiB0cnVlCn0KCmZ1bmMgaXNOZXN0ZWRPYmplY3QobmFtZSBzdHJpbmcpIGJvb2wgewoJcmV0dXJuIHN0cmluZ3MuQ29udGFpbnMobmFtZSwgInN0cnVjdCB7IikKfQoKZnVuYyBwYXJzZUZpZWxkKHZhbHVlIHJlZmxlY3QuVmFsdWUsIHR5cCByZWZsZWN0LlR5cGUsIGZkIHJlZmxlY3QuU3RydWN0RmllbGQpICptb2RlbCB7CgkvLyB1bmV4cG9ydCBmaWVsZAoJaWYgZmQuTmFtZVswXSA+ICdaJyB8fCBmZC5OYW1lWzBdIDwgJ0EnIHsKCQlyZXR1cm4gbmlsCgl9Cgl2YXIgZiBtb2RlbAoJZi5OYW1lID0gc3RyaW5ncy5TcGxpdChmZC5UYWcuR2V0KCJqc29uIiksICIsIilbMF0KCS8vIGlnbm9yZSBmaWVsZAoJaWYgZi5OYW1lID09ICItIiB7CgkJcmV0dXJuIG5pbAoJfQoJZi5Bbm9ueW1vdXMgPSBmZC5Bbm9ueW1vdXMKCWlmIGYuTmFtZSA9PSAiIiB7CgkJZi5OYW1lID0gZmQuTmFtZQoJfQoJc3dpdGNoIHR5cC5LaW5kKCkgewoJY2FzZSByZWZsZWN0LlN0cmluZzoKCQlmLlR5cGUgPSB0eXBlU3RyaW5nCgljYXNlIHJlZmxlY3QuSW50LCByZWZsZWN0LkludDgsIHJlZmxlY3QuSW50MTYsIHJlZmxlY3QuSW50MzIsIHJlZmxlY3QuSW50NjQsCgkJcmVmbGVjdC5VaW50LCByZWZsZWN0LlVpbnQ4LCByZWZsZWN0LlVpbnQxNiwgcmVmbGVjdC5VaW50MzIsIHJlZmxlY3QuVWludDY0OgoJCWYuVHlwZSA9IHR5cGVJbnQKCWNhc2UgcmVmbGVjdC5GbG9hdDMyLCByZWZsZWN0LkZsb2F0NjQ6CgkJZi5UeXBlID0gdHlwZU51bWJlcgoJY2FzZSByZWZsZWN0LkJvb2w6CgkJZi5UeXBlID0gdHlwZUJvb2wKCWNhc2UgcmVmbGVjdC5TdHJ1Y3Q6CgkJaWYgYnVpbGRJbiwgb2sgOj0gYnVpbGRJblR5cGVzW3R5cC5TdHJpbmcoKV07IG9rIHsKCQkJZi5UeXBlID0gYnVpbGRJbgoJCQlicmVhawoJCX0KCQlmLlR5cGUgPSB0eXBlT2JqZWN0CgkJbSA6PSBwYXJzZURlZmluZXMoJnZhbHVlLCB0eXApCgkJZi5PYmplY3QgPSAmbQoJY2FzZSByZWZsZWN0LlB0cjoKCQl2LCB0IDo9IGluZGlyZWN0VHlwZShmZC5UeXBlKQoJCXJldHVybiBwYXJzZUZpZWxkKHYsIHQsIGZkKQoJY2FzZSByZWZsZWN0LkFycmF5LCByZWZsZWN0LlNsaWNlOgoJCWYuVHlwZSA9IHR5cGVBcnJheQoJCXYsIHQgOj0gaW5kaXJlY3RUeXBlKGZkLlR5cGUuRWxlbSgpKQoJCW0gOj0gcGFyc2VEZWZpbmVzKCZ2LCB0KQoJCWYuT2JqZWN0ID0gJm0KCWNhc2UgcmVmbGVjdC5NYXA6CgkJZi5UeXBlID0gdHlwZU1hcAoJCXYsIHQgOj0gaW5kaXJlY3RUeXBlKGZkLlR5cGUuRWxlbSgpKQoJCXZtIDo9IHBhcnNlRGVmaW5lcygmdiwgdCkKCQlmLk9iamVjdCA9ICZ2bQoJfQoJcmV0dXJuICZmCn0KCmZ1bmMgbmFtZU9mVHlwZSh0IHJlZmxlY3QuVHlwZSkgc3RyaW5nIHsKCXJldHVybiB0LlN0cmluZygpCn0KCmZ1bmMgaW5kaXJlY3RUeXBlKHQgcmVmbGVjdC5UeXBlKSAocmVmbGVjdC5WYWx1ZSwgcmVmbGVjdC5UeXBlKSB7Cglzd2l0Y2ggdC5LaW5kKCkgewoJY2FzZSByZWZsZWN0LlB0cjoKCQlyZXR1cm4gcmVmbGVjdC5JbmRpcmVjdChyZWZsZWN0Lk5ldyh0LkVsZW0oKSkpLCB0LkVsZW0oKQoJfQoJcmV0dXJuIHJlZmxlY3QuSW5kaXJlY3QocmVmbGVjdC5OZXcodCkpLCB0Cn0KCmZ1bmMgcGFyc2VEZWZpbmVzKHYgKnJlZmxlY3QuVmFsdWUsIHQgcmVmbGVjdC5UeXBlKSBtb2RlbCB7CglpZiB2ID09IG5pbCB7CgkJcmV0dXJuIG1vZGVse30KCX0KCglzd2l0Y2ggdC5LaW5kKCkgewoJY2FzZSByZWZsZWN0LlB0cjoKCQlpZiB2LklzTmlsKCkgewoJCQl2LCB0IDo9IGluZGlyZWN0VHlwZSh0KQoJCQlyZXR1cm4gcGFyc2VEZWZpbmVzKCZ2LCB0KQoJCX0KCX0KCglpZiB0LktpbmQoKSA9PSByZWZsZWN0LlB0ciB7CgkJb2JqIDo9IHJlZmxlY3QuSW5kaXJlY3QoKnYpLkludGVyZmFjZSgpCgkJdiA6PSByZWZsZWN0LlZhbHVlT2Yob2JqKQoJCXQgOj0gcmVmbGVjdC5UeXBlT2Yob2JqKQoJCXJldHVybiBwYXJzZURlZmluZXMoJnYsIHQpCgl9CgoJa2V5IDo9IG5hbWVPZlR5cGUodCkKCWlmIHYsIG9rIDo9IGRlZmluaXRpb25zW2tleV07IG9rIHsKCQlpZiB2LlR5cGUgPT0gdHlwZU9iamVjdCAmJiAhc3RyaW5ncy5Db250YWlucyh2Lk5hbWUsICJzdHJ1Y3QgeyAiKSB7CgkJCXJldHVybiBtb2RlbHtOYW1lOiB2Lk5hbWUsIFR5cGU6IHYuVHlwZX0KCQl9CgkJcmV0dXJuIHYKCX0KCS8vIGJsb2NrIGRlYWQgbG9vcAoJZGVmaW5pdGlvbnNba2V5XSA9IHNhbXBsZU1vZGVsKGtleSwgdCkKCgl2YXIgbSBtb2RlbAoJc3dpdGNoIHQuS2luZCgpIHsKCWNhc2UgcmVmbGVjdC5TdHJpbmc6CgkJbS5OYW1lID0gdHlwZVN0cmluZwoJCW0uVHlwZSA9IHR5cGVTdHJpbmcKCQlyZXR1cm4gbQoJY2FzZSByZWZsZWN0LkludCwgcmVmbGVjdC5JbnQ4LCByZWZsZWN0LkludDE2LCByZWZsZWN0LkludDMyLCByZWZsZWN0LkludDY0LAoJCXJlZmxlY3QuVWludCwgcmVmbGVjdC5VaW50OCwgcmVmbGVjdC5VaW50MTYsIHJlZmxlY3QuVWludDMyLCByZWZsZWN0LlVpbnQ2NDoKCQltLk5hbWUgPSB0eXBlSW50CgkJbS5UeXBlID0gdHlwZUludAoJCXJldHVybiBtCgljYXNlIHJlZmxlY3QuRmxvYXQzMiwgcmVmbGVjdC5GbG9hdDY0OgoJCW0uTmFtZSA9IHR5cGVOdW1iZXIKCQltLlR5cGUgPSB0eXBlTnVtYmVyCgljYXNlIHJlZmxlY3QuQm9vbDoKCQltLk5hbWUgPSB0eXBlQm9vbAoJCW0uVHlwZSA9IHR5cGVCb29sCgljYXNlIHJlZmxlY3QuU3RydWN0OgoJCW0uTmFtZSA9IGtleQoJCW0uVHlwZSA9IHR5cGVPYmplY3QKCQl2YXIgZmllbGRzIFtdKm1vZGVsCgkJZm9yIGkgOj0gMDsgaSA8IHYuTnVtRmllbGQoKTsgaSsrIHsKCQkJdiA6PSB2LkZpZWxkKGkpCgkJCWYgOj0gcGFyc2VGaWVsZCh2LCB0LkZpZWxkKGkpLlR5cGUsIHQuRmllbGQoaSkpCgkJCWlmIGYgPT0gbmlsIHsKCQkJCWNvbnRpbnVlCgkJCX0KCQkJZmllbGRzID0gYXBwZW5kKGZpZWxkcywgZikKCQl9CgkJbS5GaWVsZHMgPSBmaWVsZHMKCWNhc2UgcmVmbGVjdC5BcnJheSwgcmVmbGVjdC5TbGljZToKCQltLlR5cGUgPSB0eXBlQXJyYXkKCQlmbXQuUHJpbnRsbigibmFtZS0+IiwgdC5FbGVtKCkuTmFtZSgpKQoJCXYsIHQgOj0gaW5kaXJlY3RUeXBlKHQuRWxlbSgpKQoJCW1tIDo9IHBhcnNlRGVmaW5lcygmdiwgdCkKCQltLk9iamVjdCA9ICZtbQoJY2FzZSByZWZsZWN0Lk1hcDoKCQltLlR5cGUgPSB0eXBlTWFwCgkJdiwgdCA6PSBpbmRpcmVjdFR5cGUodC5FbGVtKCkpCgkJZm10LlByaW50bG4oInR5cDoiLCB0KQoJCW1tIDo9IHBhcnNlRGVmaW5lcygmdiwgdCkKCQltLk9iamVjdCA9ICZtbQoJfQoJZGVmaW5pdGlvbnNba2V5XSA9IG0KCWlmIG0uVHlwZSA9PSB0eXBlT2JqZWN0ICYmICFpc05lc3RlZE9iamVjdChtLk5hbWUpIHsKCQlyZXR1cm4gbW9kZWx7TmFtZTogbS5OYW1lLCBUeXBlOiBtLlR5cGV9Cgl9CglyZXR1cm4gbQp9CgpmdW5jIHNhbXBsZU1vZGVsKGtleSBzdHJpbmcsIHQgcmVmbGVjdC5UeXBlKSBtb2RlbCB7Cglzd2l0Y2ggdC5LaW5kKCkgewoJY2FzZSByZWZsZWN0LlN0cmluZzoKCQlyZXR1cm4gbW9kZWx7TmFtZToga2V5LCBUeXBlOiB0eXBlU3RyaW5nfQoJY2FzZSByZWZsZWN0LkludCwgcmVmbGVjdC5JbnQ4LCByZWZsZWN0LkludDE2LCByZWZsZWN0LkludDMyLCByZWZsZWN0LkludDY0LAoJCXJlZmxlY3QuVWludCwgcmVmbGVjdC5VaW50OCwgcmVmbGVjdC5VaW50MTYsIHJlZmxlY3QuVWludDMyLCByZWZsZWN0LlVpbnQ2NDoKCQlyZXR1cm4gbW9kZWx7TmFtZToga2V5LCBUeXBlOiB0eXBlSW50fQoJY2FzZSByZWZsZWN0LkZsb2F0MzIsIHJlZmxlY3QuRmxvYXQ2NDoKCQlyZXR1cm4gbW9kZWx7TmFtZToga2V5LCBUeXBlOiB0eXBlTnVtYmVyfQoJY2FzZSByZWZsZWN0LkJvb2w6CgkJcmV0dXJuIG1vZGVse05hbWU6IGtleSwgVHlwZTogdHlwZUJvb2x9CglkZWZhdWx0OgoJCXJldHVybiBtb2RlbHtOYW1lOiBrZXksIFR5cGU6IHR5cGVPYmplY3R9Cgl9CglyZXR1cm4gbW9kZWx7fQp9Cg=="

var templateServerBase64 = "Ly8gK2J1aWxkIHNhbXBsZV9zd2FnZ2VyCgpwYWNrYWdlIHNhbXBsZV9zd2FnZ2VyCgppbXBvcnQgKAoJImh0bWwvdGVtcGxhdGUiCgkibmV0L2h0dHAiCikKCnZhciBzZXJ2ZXJKc29uIHN0cmluZwoKdmFyIGh0bWxUZW1wID0gYAo8IS0tIEhUTUwgZm9yIHN0YXRpYyBkaXN0cmlidXRpb24gYnVuZGxlIGJ1aWxkIC0tPgo8IURPQ1RZUEUgaHRtbD4KPGh0bWwgbGFuZz0iZW4iPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDx0aXRsZT5Td2FnZ2VyIFVJPC90aXRsZT4KICAgIDxsaW5rIHJlbD0ic3R5bGVzaGVldCIgdHlwZT0idGV4dC9jc3MiCiAgICAgICAgICBocmVmPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zd2FnZ2VyLXVpLzMuMTguMi9zd2FnZ2VyLXVpLmNzcyI+CiAgICA8bGluayByZWw9Imljb24iIHR5cGU9ImltYWdlL3BuZyIgaHJlZj0iZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFDQUFBQUFnQ0FZQUFBQnplbnIwQUFBRVBFbEVRVlI0QWIxWEE4eGxXUXgrYTl1MmJjUmV4MTdidGoxRzhOdTJiZHUyYmZPaTAyL3l6ak4vTldudVlkdGJINDJqb0tycXFiS3krYVNzU0QveU4wS1MxNnQ0UEFLVTVJMGEva1poRDJkd1ZyTlRvS2p5aFV6NGUwV1Irb2hVY2dSd2xnWDVrZTllYkkrK25UK1czbVlpVTRJd3I5SHdkQU9WdEhwU1l1WFBGRjcwSVpESFAxRnhxd2Z2MVJQT0NNQmRwdkV1YURuSlhMbVkveUJPRUZ2ZlhLYThwdVAwYjhUZDlKbW54aWIrRTNFWDVUWWU0enRMT3FGWmlBVFFkSlQ1MVh5aFFWeXU2Z3FoWDRLdkFYR244SmVncTZteU13ZzBoRm1hbVBhMWR2OWNNR2ZIb3BEOHQwRnNXeGljL3lheHd4b0lvVjVzeStaeGdybEh4aXNnc0NQb252YWlvUkFKRm4wQ0RnZDFBVVB5MzhMRkhjV2d2RGRJMElkam1xcitRdmJZQ1dLbzZnbzJ1dmkxenpsVTBSRkFxK3R6TkRSVmE1ZlI0RlFOclc3TXcvNzB0ZSs1Um5zVm5RRzY2REFLVWNTNThIWlRoNHN1L1lJQTQzTnRsTjF3eUs0QTJmVUhhV3kyaFFDeFpWOGI3ZjBjZEpVdU9wQzBkTFpudS9SZ01ZL0R4NVFnb2dDd1Avb2hoOVg5WDlSOUJLanRpVERieTJrNG92VUZ1ZStrTHlCMWlwQkRESnRlYUJsTUljRHZvVGM1TEFDMENHZ2RURFBiK3p2OERsMW9NdStuTlZBRkpzaGlPR0F1UUJvQmZndTUzbUVCZmd5OEhFeW9kU2pkMGo1OFNVVEV6OUJBQkNZbHJSNFdEL2VObDBGUytzcm5iSWNGK05MN0RJUWREVXhXV2R3dmFuVVRHb2pTb0twaGdueHVlbkJmOUFQSUNkUTdYb281ZmU1MW1wRWdZQVFVYyt6aERNWmRvd1ZnWU5GM0VpcCtJQUR6cnRPZ25HS0NvbUo0S0xOdUgzRjQwdkxhTkIyS2ZSeHIxRDZjU1N2cnMvUnJ5SFZnVEpQelhUUzEwTVBqTTludTEvTFpHZW9ZeWNGWk9oajdLQzJ0VG9JR1pkVWZNS0lkVnZpK01NR1lOUUg0MG41Y3BxVzFLU2IybUZhQWJPUUQrQU1FQUhPYVh1eUZBUFFyQ3dEaE9rZnljSllPeER4Q2k2c1RvSUhRdEM0QXE5aXFDZmJIUEt3MVFRbm05QVdyOTJzakU1d0pORExCRnpvVDVNTUVFTjZ1Q1NJd0tiYm1oQlBDQ2M5eTJnbjdKeXN0TzJHTGNFSXBabmZDTU1CbUdDSmRDd0VRaHBKQklycHpEeExSN1FhSlNIcGFtNHJsUGl6a05oNDF1MURkRlVxQWZjNms0c2g3YmFUaXc4SUJCOERicEJndG9aTXh1aEJUK2lXMlVHQVFHWGFaSTN4SFo1c0pFRmYyalVreHVwTFdOaGRGRXZyWnFQTlZWR1VLRzVXZGdXYmxHS1YxYldPQmhxYnI3QW1BTk10bkY2RTUrc2IzUEtPOThnNS9Bb0NYV2Nlc0dEUWthS04ydWlFSnpIdk50Q0d4MkpJbGFPT1QzTk5mMmpIbXJtblBnNlp3dkNUd3N0cVVvbkVVUWtBVDIvL3oxdzM2UWJuRmJudU8xbGtJQVhYQkozNFdqdWtFb3Z0Qks4YzBESmlyMXpyOE1ORjJyeVNpSTdmeENQMXRJVTlZYURnUWFueG4wZUJoc3BrRW1sdDVtcjFyOGpSREpLQ2VJNStqcUFBeHhob2l3T1JwcHN3dzgvZTM5VmhGdU9DaHljSU1rSU9BSklNNDM5YmoxSUpHVGtjUGh6YUt2ekdvWkNpblFJeFJXSkRiR1ovRldVZnBuZ0NsZVROZG1rcmhJZ0FBQUFCSlJVNUVya0pnZ2c9PQoiIHNpemVzPSIzMngzMiIvPgogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIGhyZWY9ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQkFBQUFBUUNBWUFBQUFmOC85aEFBQUJoRWxFUVZSNEFaVlRBMHgxY1J6OWpQSEQ3RENuS2MxaHRtczJzcHY1c212SU5TL2JqWEY0eHBSdHpIdnZmMC8vODJ6YzdmTGcvdmpKLzFBVUVTOFVXNk5ReEtHOFAvRjBQamNTY3hNRGhjbzNTVklKWWJWcWo2Y3h2bDJJOXJsTThCeVR6OXJqS1JDVFpvM2tCaFBQM2p5YjBUU1ZpcEtCVDBIUFJvbmRQSnNnVGVaOVRPUUhGY1gxNC85SkRIdldqZjl6bVRTNmMyWm9yait2YXhwd2NuY1FJRHk1MjhlR3B0RVpTUXFvc2RlRWVUTm5GekZVSkxWamYzSDdZbkcvYTQ0bkhWR3d3aXlTQzNoOE8wYmw4TzhBZy9LaEgzaDhQM0c5eThJV2dGcEc4TVJLOCtQa2JqSE1GMnRnT24zTGVlaVl5MExIZkRaNmwzTFJOSjBHMC9tSzVKU1FpN2JaREZEclkwRFFmTDRxeVRUSXA1Z256V2dBNDlreXBuWkxmUXhDcFBBclJBckhnU213RUpyanFkaUxlT1Fvb3J1TmJBMEJ0b290OHpjNHZ0M0hwcmJKMmNaazJGeHQ5QXlTQ1hWUkR0TDFzOUh4ZDk5UkZyTTBZU1NoeE1Rb1ZyeEcyZCtra2Vtd0ppd1NLODJUenh3Y1l0ektBSEYwNjh3dEZJbisvQTl0TW1xSTdNeHpHQUFBQUFCSlJVNUVya0pnZ2c9PQoiIHNpemVzPSIxNngxNiIvPgogICAgPHN0eWxlPgogICAgICAgIGh0bWwgewogICAgICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94OwogICAgICAgICAgICBvdmVyZmxvdzogLW1vei1zY3JvbGxiYXJzLXZlcnRpY2FsOwogICAgICAgICAgICBvdmVyZmxvdy15OiBzY3JvbGw7CiAgICAgICAgfQoKICAgICAgICAqLAogICAgICAgICo6YmVmb3JlLAogICAgICAgICo6YWZ0ZXIgewogICAgICAgICAgICBib3gtc2l6aW5nOiBpbmhlcml0OwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgYmFja2dyb3VuZDogI2ZhZmFmYTsKICAgICAgICB9CiAgICA8L3N0eWxlPgo8L2hlYWQ+Cgo8Ym9keT4KPGRpdiBpZD0ic3dhZ2dlci11aSI+PC9kaXY+CjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zd2FnZ2VyLXVpLzMuMTguMi9zd2FnZ2VyLXVpLWJ1bmRsZS5qcyI+PC9zY3JpcHQ+CjxzY3JpcHQgc3JjPSJodHRwczovL2NkbmpzLmNsb3VkZmxhcmUuY29tL2FqYXgvbGlicy9zd2FnZ2VyLXVpLzMuMTguMi9zd2FnZ2VyLXVpLXN0YW5kYWxvbmUtcHJlc2V0LmpzIj48L3NjcmlwdD4KPHNjcmlwdD4KCiAgICB2YXIgc3BlYyA9IHt7LlNwZWN9fTsKCglzcGVjID0gSlNPTi5wYXJzZShzcGVjKTsKCiAgICB3aW5kb3cub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgIGNvbnN0IHVpID0gU3dhZ2dlclVJQnVuZGxlKHsKICAgICAgICAgICAgc3BlYzogc3BlYywKICAgICAgICAgICAgZG9tX2lkOiAnI3N3YWdnZXItdWknLAogICAgICAgICAgICBkZWVwTGlua2luZzogdHJ1ZSwKICAgICAgICAgICAgcHJlc2V0czogWwogICAgICAgICAgICAgICAgU3dhZ2dlclVJQnVuZGxlLnByZXNldHMuYXBpcywKICAgICAgICAgICAgICAgIFN3YWdnZXJVSVN0YW5kYWxvbmVQcmVzZXQuc2xpY2UoMSkgLy8gaGVyZQogICAgICAgICAgICBdLAogICAgICAgICAgICBsYXlvdXQ6ICJTdGFuZGFsb25lTGF5b3V0IgogICAgICAgIH0pOwogICAgICAgIHdpbmRvdy51aSA9IHVpOwogICAgfQo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+CmAKCmZ1bmMgU2VydmVySFRUUCh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewoJaWYgc2VydmVySnNvbiA9PSAiIiB7CgkJc2VydmVySnNvbiA9IHBhcnNlKCkKCQlpZiBzZXJ2ZXJKc29uID09ICIiIHsKCQkJc2VydmVySnNvbiA9ICJ7fSIKCQl9Cgl9Cgl0LCBlcnIgOj0gdGVtcGxhdGUuTmV3KCJzd2FnZ2VyIikuUGFyc2UoaHRtbFRlbXApCglpZiBlcnIgIT0gbmlsIHsKCQl3LldyaXRlKFtdYnl0ZShlcnIuRXJyb3IoKSkpCgkJcmV0dXJuCgl9CgllcnIgPSB0LkV4ZWN1dGUodywgbWFwW3N0cmluZ11zdHJpbmd7IlNwZWMiOiBzZXJ2ZXJKc29ufSkKCWlmIGVyciAhPSBuaWwgewoJCXcuV3JpdGUoW11ieXRlKGVyci5FcnJvcigpKSkKCX0KfQo="

var templateServer2Base64 = "Ly8gK2J1aWxkICFzYW1wbGVfc3dhZ2dlcgoKcGFja2FnZSBzYW1wbGVfc3dhZ2dlcgoKaW1wb3J0ICJuZXQvaHR0cCIKCmZ1bmMgU2VydmVySFRUUCh3IGh0dHAuUmVzcG9uc2VXcml0ZXIsIHIgKmh0dHAuUmVxdWVzdCkgewoJdy5Xcml0ZShbXWJ5dGUoYFBsZWFzZSB1c2UgYnVpbGQgdGFnICJzYW1wbGVfc3dhZ2dlciIgdG8gb3BlbiBzd2FnZ2VyIWApKQp9Cg=="

const templateVars = `// +build sample_swagger

package sample_swagger

import (
	{{Imports}}
)

var generatorJson = {{GeneratorJson}}

var generatorModels = []interface{}{
	{{GeneratorModels}}
}

`
